import{R as ee,h as n,j as e,b as M,e as ce,p as i,I as de,d as a,o as I,$ as pe,a0 as he,G as xe,a1 as ge,a9 as ue,aa as me,f as Z}from"./vendor-ui-PEyQLrjK.js";import{b as fe,g as ye,h as be}from"./opacityBlending-CJ2o7S7h.js";import"./vendor-color-D1ETm4ty.js";import{u as je,g as Ce}from"./index-CSX1kYsl.js";import{g as we,f as ve}from"./documentationExport-FOLz8xb4.js";import"./vendor-react-D6La9ApI.js";function Se(t,o){const c=Math.max(t,o),p=Math.min(t,o);return(c+.05)/(p+.05)}function Ae(t,o){o=o>.022?o:o+Math.pow(.022-o,1.414),t=t>.022?t:t+Math.pow(.022-t,1.414);let d=0,h=0;return Math.abs(o-t)<5e-4?0:(o>t?(d=(Math.pow(o,.56)-Math.pow(t,.57))*1.14,h=d<.1?0:d-.027):(d=(Math.pow(o,.65)-Math.pow(t,.62))*1.14,h=d>-.1?0:d+.027),h*100)}function ke(t,o){const c=Se(t,o),p=Ae(t,o);return{apca:Math.abs(p),wcag:c}}const te=ee.memo(({lightness:t,opacity:o,hue:c,chroma:p,bgHex:y,bgLuminance:A,blendMode:S="srgb",isMatching:$=!1,targetLightness:k=50,contrastFilterEnabled:O=!1,contrastFilterType:L="wcag",contrastFilterThreshold:z=4.5,showHeatmap:b=!1,onHover:d,onLeave:h,onClick:E})=>{const x=n.useMemo(()=>fe(t,p,c,o,y,S),[t,p,c,o,y,S]),{wcagContrast:j,apcaContrast:l}=n.useMemo(()=>{const r=ke(x.luminance,A);return{wcagContrast:r.wcag,apcaContrast:r.apca}},[x.luminance,A]),W=$&&Math.abs(x.lightness-k)>3,N=(L==="wcag"?j:l)>=z,m=j>=7,C=j>=4.5,g=l>=90,F=l>=75,G=l>=60,u=(()=>{if(!b)return null;const B=(L==="apca"?l:j)/z;return B>=1.5?"rgba(34, 197, 94, 0.7)":B>=1?"rgba(59, 130, 246, 0.6)":B>=.8?"rgba(251, 191, 36, 0.6)":"rgba(239, 68, 68, 0.7)"})(),R=`oklch(${t}% ${p} ${c} / ${o}%)`,V=n.useCallback(r=>{requestAnimationFrame(()=>{d({x:r.clientX||0,y:r.clientY||0,content:e.jsxs("div",{style:{fontFamily:"monospace",fontSize:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px",marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#a1a1aa"},children:"Source:"}),e.jsxs("span",{style:{color:"#fafafa"},children:["L",t]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px",marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#a1a1aa"},children:"Opacity:"}),e.jsxs("span",{style:{color:"#fafafa"},children:[o,"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px",marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#a1a1aa"},children:"Result L*:"}),e.jsx("span",{style:{color:"#fafafa",fontWeight:"bold"},children:x.lightness.toFixed(1)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px",marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#a1a1aa"},children:"Hex:"}),e.jsx("span",{style:{color:"#fafafa",fontFamily:"monospace",fontSize:"10px"},children:x.hex})]}),e.jsxs("div",{style:{marginTop:"8px",borderTop:"1px solid #3f3f46",paddingTop:"8px"},children:[e.jsx("div",{style:{fontSize:"9px",textTransform:"uppercase",letterSpacing:"0.05em",color:"#71717a",marginBottom:"4px"},children:"Contrast"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px",marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#a1a1aa"},children:"WCAG:"}),e.jsxs("span",{style:{color:"#fafafa",fontWeight:"bold"},children:[j.toFixed(2),":1",m&&e.jsx("span",{style:{marginLeft:"4px",fontSize:"8px",color:"#22c55e"},children:"AAA"}),!m&&C&&e.jsx("span",{style:{marginLeft:"4px",fontSize:"8px",color:"#3b82f6"},children:"AA"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px"},children:[e.jsx("span",{style:{color:"#a1a1aa"},children:"APCA:"}),e.jsxs("span",{style:{color:"#fafafa",fontWeight:"bold"},children:["Lc ",l.toFixed(0),g&&e.jsx("span",{style:{marginLeft:"4px",fontSize:"8px",color:"#facc15"},children:"GOLD"}),!g&&F&&e.jsx("span",{style:{marginLeft:"4px",fontSize:"8px",color:"#a1a1aa"},children:"SILVER"}),!g&&!F&&G&&e.jsx("span",{style:{marginLeft:"4px",fontSize:"8px",color:"#f97316"},children:"BRONZE"})]})]})]})]})})})},[t,o,x,j,l,m,C,g,F,G,d]),D=n.useCallback(()=>{E(R)},[R,E]);return e.jsx("div",{onClick:D,style:{position:"relative",aspectRatio:"1",backgroundColor:x.hex,borderRadius:"4px",cursor:"pointer",opacity:W?.25:O&&!N?.3:1,transition:"opacity 0.15s, transform 0.1s",border:"1px solid rgba(255, 255, 255, 0.05)"},onMouseEnter:r=>{const w=r.currentTarget;w.style.transform="scale(1.1)",w.style.zIndex="10",V(r)},onMouseLeave:r=>{const w=r.currentTarget;w.style.transform="scale(1)",w.style.zIndex="1",h()},children:u&&e.jsx("div",{style:{position:"absolute",inset:0,backgroundColor:u,borderRadius:"4px",pointerEvents:"none"}})})});te.displayName="MatrixCell";const Re=({scale:t})=>{const{globalSettings:o,selectedBackground:c,getLightnessSteps:p}=je(),[y,A]=n.useState({visible:!1,content:null,position:{x:0,y:0}}),[S,$]=n.useState(!1),[k,O]=n.useState(60),[L,z]=n.useState(!1),[b,d]=n.useState(!1),[h,E]=n.useState(!1),[x,j]=n.useState(!1),[l,W]=n.useState(1),[P,N]=n.useState(56),m=n.useRef(null),C=p(t),g=o.opacitySteps,F=o.blendMode||"srgb",G=ye(be(c)),X=n.useMemo(()=>C.map(s=>{const f=s/100;return Ce(f,t.manualChroma,t.hue,t.hueCurve,t.chromaCurve,{contrastMode:t.contrastMode||"standard",calculateContrast:!0,targetBackground:t.targetBackground||"black",targetLc:t.apcaTargetLc,targetWcagRatio:t.wcagTargetRatio,chromaCompensation:t.chromaCompensation??!0})}),[t,C]),u=n.useMemo(()=>we(X),[X]),R=n.useMemo(()=>{if(!t.contrastThreshold?.enabled)return u;const s={minAPCA:t.contrastThreshold.useApca?t.contrastThreshold.minLc:void 0,minWCAG:t.contrastThreshold.useApca?void 0:t.contrastThreshold.minWcag,useAPCA:t.contrastThreshold.useApca??!0};return ve(u,s)},[u,t.contrastThreshold]),V=n.useCallback(s=>{A({visible:!0,content:s.content,position:{x:s.x,y:s.y}})},[]),D=n.useCallback(()=>{A({visible:!1,content:null,position:{x:0,y:0}})},[]),r=n.useMemo(()=>{const s=u.length,f=R.length,v=u.filter(H=>H.apca>=75).length,T=u.filter(H=>H.wcagLevel==="AAA").length;return{total:s,passing:f,passingPercent:(f/s*100).toFixed(1),apcaHighContrast:v,wcagAAA:T}},[u,R]),w=n.useCallback(s=>{navigator.clipboard.writeText(s),z(!0),setTimeout(()=>z(!1),2e3)},[]),B=n.useCallback(()=>{W(s=>Math.max(s-.25,.5))},[]),se=n.useCallback(()=>{W(s=>Math.min(s+.25,2))},[]),ne=n.useCallback(()=>{W(1)},[]),U=t.contrastThreshold?.enabled||!1,q=t.contrastThreshold?.useApca?"apca":"wcag",K=q==="apca"?t.contrastThreshold?.minLc||60:t.contrastThreshold?.minWcag||4.5;return n.useEffect(()=>{const s=()=>{if(!m.current)return;const v=m.current,T=v.clientWidth,H=v.clientHeight,J=32,Q=4,_=g.length,Y=C.length,oe=T-J-Q*(_+2),ae=H-J-60-Q*(Y+1),re=Math.floor(oe/(_+1)),ie=Math.floor(ae/Y),le=Math.max(40,Math.min(re,ie,120));N(le)};s();const f=new ResizeObserver(s);return m.current&&f.observe(m.current),()=>{f.disconnect()}},[g.length,C.length,b,h]),e.jsxs(M,{style:{position:"relative",width:"100%",display:"flex",flexDirection:"column",flex:1,minHeight:0,...b?{position:"fixed",inset:0,zIndex:50,backgroundColor:"#09090b"}:{}},children:[e.jsx(ce,{style:{flex:1},children:e.jsxs(i,{direction:"column",gap:"4",p:"4",style:{maxWidth:"100%",paddingBottom:"80px"},children:[e.jsxs(i,{align:"center",justify:"between",gap:"3",style:{backgroundColor:"#18181b",borderRadius:"8px",padding:"10px 12px",border:"1px solid #3f3f46",flexWrap:"wrap"},children:[e.jsxs(i,{align:"center",gap:"2",style:{flex:"1",minWidth:"200px"},children:[e.jsx(de,{style:{width:"16px",height:"16px",color:"#6366f1",flexShrink:0}}),e.jsxs(a,{size:"1",color:"gray",children:[e.jsx(a,{as:"span",weight:"medium",style:{color:"#d4d4d8"},children:t.name})," ","at opacity levels on ",c]})]}),e.jsxs(i,{align:"center",gap:"3",style:{flexWrap:"wrap"},children:[e.jsxs(i,{align:"center",gap:"2",children:[e.jsx("input",{type:"checkbox",id:"match-mode",checked:S,onChange:s=>$(s.target.checked),style:{width:"16px",height:"16px",borderRadius:"4px",cursor:"pointer"}}),e.jsx(a,{as:"label",htmlFor:"match-mode",size:"1",weight:"medium",style:{cursor:"pointer",color:"#d4d4d8"},children:"Match"})]}),S&&e.jsxs(i,{align:"center",gap:"2",children:[e.jsx("input",{type:"range",min:"0",max:"100",value:k,onChange:s=>O(Number(s.target.value)),style:{width:"96px"}}),e.jsxs(a,{size:"1",weight:"medium",style:{fontFamily:"monospace",width:"32px",color:"#d4d4d8"},children:["L",k]})]}),e.jsxs(i,{align:"center",gap:"2",children:[e.jsx(a,{size:"1",weight:"medium",style:{color:"#a1a1aa"},children:"Zoom:"}),e.jsx(I,{size:"1",variant:"soft",onClick:B,disabled:l<=.5,children:"-"}),e.jsxs(a,{size:"1",weight:"bold",style:{fontFamily:"monospace",minWidth:"48px",textAlign:"center",color:"#d4d4d8"},children:[Math.round(l*100),"%"]}),e.jsx(I,{size:"1",variant:"soft",onClick:se,disabled:l>=2,children:"+"}),e.jsx(I,{size:"1",variant:"outline",onClick:ne,disabled:l===1,children:"Reset"})]})]}),e.jsxs(pe,{children:[e.jsx(he,{children:e.jsxs(I,{size:"2",variant:"outline",children:[e.jsx(xe,{width:"16",height:"16"}),"Advanced"]})}),e.jsx(ge,{style:{width:"280px"},children:e.jsxs(i,{direction:"column",gap:"3",children:[e.jsx(a,{size:"2",weight:"bold",children:"Advanced Options"}),e.jsxs(I,{size:"2",variant:"soft",onClick:()=>E(!h),style:{width:"100%"},children:[h?"Hide":"Show"," Contrast Insights"]}),e.jsxs(i,{align:"center",gap:"2",children:[e.jsx("input",{type:"checkbox",id:"heatmap-mode",checked:x,onChange:s=>j(s.target.checked),style:{width:"16px",height:"16px",borderRadius:"4px",cursor:"pointer"}}),e.jsx(a,{as:"label",htmlFor:"heatmap-mode",size:"2",weight:"medium",style:{cursor:"pointer",color:"#d4d4d8"},children:"Heatmap Mode"})]}),U&&e.jsxs(M,{children:[e.jsx(a,{size:"1",weight:"medium",mb:"1",style:{color:"#a1a1aa"},children:"Active Filter"}),e.jsx(a,{size:"2",style:{color:"#d4d4d8",fontFamily:"monospace"},children:q==="apca"?`APCA Lc ≥ ${K}`:`WCAG ${K}:1`})]})]})})]}),e.jsx("button",{onClick:()=>d(!b),style:{flexShrink:0,padding:"8px",backgroundColor:"#27272a",borderRadius:"8px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:b?"Exit fullscreen (ESC)":"Enter fullscreen",children:b?e.jsx(ue,{style:{width:"20px",height:"20px",color:"#a1a1aa"}}):e.jsx(me,{style:{width:"20px",height:"20px",color:"#a1a1aa"}})})]}),h&&e.jsxs(M,{style:{backgroundColor:"#18181b",borderRadius:"8px",padding:"16px",border:"1px solid #3f3f46"},children:[e.jsx(a,{size:"3",weight:"bold",mb:"3",children:"Contrast Analysis"}),e.jsxs(i,{gap:"3",wrap:"wrap",mb:"3",children:[e.jsxs(Z,{style:{flex:"1",minWidth:"150px",backgroundColor:"#27272a",padding:"12px"},children:[e.jsx(a,{size:"6",weight:"bold",style:{color:"#6366f1"},children:r.total}),e.jsx(a,{size:"1",color:"gray",children:"Total Pairs"})]}),e.jsxs(Z,{style:{flex:"1",minWidth:"150px",backgroundColor:"#27272a",padding:"12px"},children:[e.jsx(a,{size:"6",weight:"bold",style:{color:"#22c55e"},children:r.passing}),e.jsxs(a,{size:"1",color:"gray",children:["Passing (",r.passingPercent,"%)"]})]}),e.jsxs(Z,{style:{flex:"1",minWidth:"150px",backgroundColor:"#27272a",padding:"12px"},children:[e.jsx(a,{size:"6",weight:"bold",style:{color:"#a855f7"},children:r.apcaHighContrast}),e.jsx(a,{size:"1",color:"gray",children:"APCA Lc ≥ 75"})]}),e.jsxs(Z,{style:{flex:"1",minWidth:"150px",backgroundColor:"#27272a",padding:"12px"},children:[e.jsx(a,{size:"6",weight:"bold",style:{color:"#818cf8"},children:r.wcagAAA}),e.jsx(a,{size:"1",color:"gray",children:"WCAG AAA"})]})]}),e.jsx(a,{size:"1",color:"gray",style:{lineHeight:"1.6"},children:"This contrast analysis examines all possible foreground/background combinations within your scale. The statistics show how many color pairs meet accessibility standards."})]}),e.jsx(i,{justify:"center",style:{fontSize:"10px",textTransform:"uppercase",fontFamily:"monospace",letterSpacing:"0.1em",color:"#71717a"},children:"Opacity Steps →"}),e.jsx(M,{ref:m,style:{width:"100%",flex:1,overflowX:"auto",overflowY:"auto",display:"flex",justifyContent:"center",alignItems:"center",WebkitOverflowScrolling:"touch"},children:e.jsxs(M,{style:{display:"inline-grid",transform:`scale(${l})`,transformOrigin:"center center",transition:"transform 0.2s ease",gap:"4px",padding:"16px",minWidth:"min-content",gridTemplateColumns:`${P}px repeat(${g.length}, ${P}px)`,gridAutoRows:`${P}px`},children:[e.jsxs(i,{align:"center",justify:"center",style:{fontSize:"10px",opacity:.5,textAlign:"center",lineHeight:"1.2",color:"#71717a"},children:["Source",e.jsx("br",{}),"L↓"]}),g.map(s=>e.jsxs(i,{align:"center",justify:"center",style:{fontSize:"10px",fontFamily:"monospace",color:"#71717a"},children:[s,"%"]},s)),C.map((s,f)=>{const v=X[f];return v?e.jsxs(ee.Fragment,{children:[e.jsx(i,{align:"center",justify:"center",style:{fontSize:"10px",fontFamily:"monospace",fontWeight:"bold",color:"#fafafa"},children:s}),g.map(T=>e.jsx(te,{lightness:s,opacity:T,hue:v.H,chroma:v.C,bgHex:c,bgLuminance:G,blendMode:F,isMatching:S,targetLightness:k,contrastFilterEnabled:U,contrastFilterType:q,contrastFilterThreshold:K,showHeatmap:x,onHover:V,onLeave:D,onClick:w},`${s}-${T}`))]},s):null})]})}),L&&e.jsx(M,{style:{position:"fixed",bottom:"24px",right:"24px",backgroundColor:"#22c55e",color:"white",padding:"12px 16px",borderRadius:"8px",fontWeight:"500",zIndex:100},children:"Copied to clipboard!"})]})}),y.visible&&e.jsx("div",{style:{position:"fixed",left:`${y.position.x+10}px`,top:`${y.position.y+10}px`,backgroundColor:"#18181b",border:"1px solid #3f3f46",borderRadius:"8px",padding:"12px",zIndex:1e3,pointerEvents:"none",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.5)"},children:y.content})]})};export{Re as MatrixView};
